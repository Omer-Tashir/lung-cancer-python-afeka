<ng-container *ngIf="!!client">

    <form class="form" [formGroup]="form" (ngSubmit)="onSubmit()">

        <h2>{{textManager.GET_CLIENT_details_title}}</h2>

        <div class="details-wrapper">

            <mat-form-field class="form-control details">
                <mat-label>{{textManager.GET_CLIENT_details_id}}</mat-label>
                <input matInput formControlName="clientId" type="number" />
            </mat-form-field>
    
            <mat-form-field class="form-control details">
                <mat-label>{{textManager.GET_CLIENT_details_first_name}}</mat-label>
                <input matInput formControlName="firstName" type="text" />
            </mat-form-field>
    
            <mat-form-field class="form-control details">
                <mat-label>{{textManager.GET_CLIENT_details_last_name}}</mat-label>
                <input matInput formControlName="lastName" type="text" />
            </mat-form-field>
    
            <mat-form-field class="form-control details">
                <mat-label>{{textManager.GET_CLIENT_details_sex}}</mat-label>
                <input matInput formControlName="sex" type="text" />
            </mat-form-field>
    
            <mat-form-field class="form-control details">
                <mat-label>{{textManager.GET_CLIENT_details_age}}</mat-label>
                <input matInput formControlName="age" type="number" />
            </mat-form-field>
    
            <mat-form-field class="form-control details">
                <mat-label>{{textManager.GET_CLIENT_details_address}}</mat-label>
                <input matInput formControlName="address" type="text" />
            </mat-form-field>
    
            <div class="form-control medical-history">
                <h4>{{textManager.GET_CLIENT_details_medical_history}}</h4>
                <ng-container *ngIf="form.get('medicalHistory')?.value?.length; else emptyMedicalHistory">
                    <ul class="client__history">
                        <li *ngFor="let appointment of form.get('medicalHistory')?.value" class="client__history-item">
                            <span>{{textManager.CLIENTS_date}}: {{appointment.date | date:'dd/MM/yyyy - hh:mm:ss'}}</span>
                            <code>{{textManager.CLIENTS_results}}: 
                                {{selectedLanguage === 'en' ? appointment.results_en : appointment.results_he}}
                            </code>
                            <code>{{textManager.CLIENTS_advise}}: 
                                {{selectedLanguage === 'en' ? appointment.advise_en : appointment.advise_he}}
                            </code>
                        </li>
                    </ul>
                </ng-container>
                
                <ng-template #emptyMedicalHistory>
                    <span class="client__empty-visits">{{textManager.CLIENTS_empty_medical_history}}</span>
                </ng-template>
            </div>

        </div>

        <div class="form-footer" [class.form-footer--rtl]="rtl">
            <button [disabled]="disabled" mat-raised-button (click)="onBack()">
                {{textManager.APP_back_btn}}
            </button>

            <button [disabled]="form.invalid || disabled" mat-raised-button type="submit">
                {{textManager.APP_continue_btn}}
            </button>

            <button [disabled]="disabled" mat-raised-button (click)="onReset()" color="warn">
                {{textManager.APP_reset_btn}}
            </button>
        </div>
    </form>

</ng-container>